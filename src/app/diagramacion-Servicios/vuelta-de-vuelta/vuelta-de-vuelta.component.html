<form [formGroup]="formVueltas">

    <div class="row">
        <div class="col-md-1">{{ serv.servicioPK.serFechaHora | date:'EE HH:mm' }} </div>
        <div class="col-md-1">
            <input type="text" formControlName="peliIda" data-toggle="tooltip" animation="true" data-placement="top" title="Pelicula" onmouseenter="$(this).tooltip('show')" class="form-control">
        </div>
        <div class="col-md-1">
            <input type="text" formControlName="videoIda" data-toggle="tooltip" animation="true" data-placement="top" title="Video" onmouseenter="$(this).tooltip('show')" class="form-control">
        </div>
        <div class="col-md-1">
            {{ serv.escalaSalida }}<br>{{ serv.fechaHoraSalida | date:'EE HH:mm' }}
        </div>
        <div class="col-md-1">
            {{ serv.escalaLlegada }}<br>{{ serv.fechaHoraLlegada | date:'EE HH:mm' }}
        </div>
        <div class="col-md-2">

            <button *ngFor="let c of serv.choferes;let i=index" type="button" class="btn btn-primary btn-xs"><span (click)="_vs.removeChofer( serv, i)" class="badge">x</span> {{c.nombre}}</button>

            <select class="form-control" #ch (change)="_vs.addChofer(serv, ch.value)">
          <option  value="null">-- Seleccionar --</option>
          <option
           *ngFor="let opt of _vs.choferesOcupacion|choferesConEstado:serv.fechaHoraSalida:serv.fechaHoraLlegada"  [value]="opt.choferPKStr"
           [ngClass]="opt.classCho" >
              {{opt.nombre}}
          </option>
    </select>
        </div>
        <div class="col-md-1">
            <select class="form-control">
              <option  value="null">-- Seleccionar --</option>
              <option *ngFor="let opt of _vs.vehiculos"  [value]="opt.vehiculoPK">
                  {{opt.interno}}
              </option>
        </select>
        </div>
        <div class="col-md-3">
            <select class="form-control" #t (change)="_vs.onChangeServRetorno(serv, t.value)" title="Servicio Vta" placeholder="Servicio Vta" data-toggle="tooltip" animation="true" data-placement="top" onmouseenter="$(this).tooltip('show')">
          <option  value="null" >-- Seleccionar --</option>
          <option *ngFor="let opt of _vs.serviciosVta|serMayoIgual:serv.fechaHoraLlegada" [value]="opt.servicioPKStr">{{ opt.detalle }}</option>
        </select>
        </div>
        <div class="col-md-1">
            <a class="btn btn-xs" data-toggle="modal">
                <i title="Guardar" data-toggle="tooltip" animation="true" data-placement="top" onmouseenter="$(this).tooltip('show')" class="fa fa-floppy-o fa-2x green" aria-hidden="true"></i>
            </a>
        </div>
    </div>
    <!-- El servicio de Retorno -->
    <div class="row" *ngIf="serv.servRetorno">
        <div class="col-md-1">{{ serv.servRetorno.servicioPK.serFechaHora | date:'EE HH:mm' }} </div>
        <div class="col-md-1">
            <input formControlName="peliVta" type="text" data-toggle="tooltip" animation="true" data-placement="top" title="Pelicula" onmouseenter="$(this).tooltip('show')" class="form-control">
        </div>
        <div class="col-md-1">
            <input formControlName="videoVta" type="text" data-toggle="tooltip" animation="true" data-placement="top" title="Pelicula" onmouseenter="$(this).tooltip('show')" class="form-control">
        </div>
        <div class="col-md-1">
            {{ serv.servRetorno.escalaSalida }}<br>{{ serv.servRetorno.fechaHoraSalida | date:'EE HH:mm' }}
        </div>
        <div class="col-md-1">
            {{ serv.servRetorno.escalaLlegada }}<br>{{ serv.servRetorno.fechaHoraLlegada | date:'EE HH:mm' }}
        </div>
        <div class="col-md-2">
            <button *ngFor="let c of serv.servRetorno.choferes;let i=index" type="button" class="btn btn-primary btn-xs"><span (click)="_vs.removeChofer( serv.servRetorno, i)" class="badge">x</span> {{c.nombre}}</button>
            <select class="form-control" #chR (change)="_vs.addChofer(serv.servRetorno, chR.value)">
              <option  value="null">-- Seleccionar --</option>
              <option
              *ngFor="let opt of _vs.choferesOcupacion|choferesConEstado:serv.servRetorno.fechaHoraSalida:serv.servRetorno.fechaHoraLlegada"  [value]="opt.choferPKStr"
              [ngClass]="opt.classCho" >
                  {{opt.nombre}}
              </option>
        </select>
        </div>
        <div class="col-md-1">
            <select class="form-control">
            <option  value="null">-- Seleccionar --</option>
            <option *ngFor="let opt of _vs.vehiculos"  [value]="opt.vehiculoPK">
                {{opt.interno}}
            </option>
      </select>
        </div>
    </div>

    <!-- <pre>{{ formVueltas.value | json }}</pre> -->

</form>